{"note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"An effort to bring real threads to PHP5.3+","name":"pthreads","google":"","body":"# What is supported ?\r\nAs the name suggests, this extension is based on Posix Threads, as such Windows is unsupported. This will not change, I have no interest in working with the Windows API whatsoever.\r\n\r\n## Project Goal\r\nThe goal of this project is not to implement all of Posix Threads for PHP, but rather to provide PHP with it's own implementation of threading using Posix Threads. The geeks among us might like to see a full implementation of Posix Threads for PHP however I feel and have found that it will be much more useful to provide an implementation of threading that works rather than spending time writing bridges that cannot be crossed.\r\n\r\n## What is required ?\r\nJust this source code and a thread safe version of PHP5.3+\r\n\r\n**Please note: you MUST have a thread safe version of PHP for this to work**\r\n\r\n## What do I need to know ?\r\n```php\r\n<?php\r\nclass HelloWorld extends Thread {\r\n    public function __construct($myvar){\r\n        $this->myvar = $myvar;\r\n    }\r\n    public function run(){\r\n        if($this->myvar){\r\n            printf(\r\n                \"You passed %s as an argument and this is Thread #%lu\\n\", \r\n                $this->myvar, Thread::self()\r\n            );\r\n        }\r\n    }\r\n}\r\n$thread = new HelloWorld(\"Threading 101\");\r\nif($thread->start()){\r\n    $thread->join();\r\n}\r\n?>\r\n```\r\nThreading in PHP should be and will be easy, and there's not much to know other than this:\r\n\r\n* You cannot share resources\r\n* Whatever run returns is returned when join() is called, again, you cannot return resources\r\n* User defined classes used in members should have their declarations included in __prepare\r\n* You cannot pass references to threads with the & operator, use objects instead\r\n\r\nAt first this might seem quite restrictive, with simplicity in mind: copying resources from other contexts is fraught with trouble, TSRM does a great job of keeping PHP thread safe, the implementation will be more stable if we do not ask it to do things that it simply doesn't want to do, like allow multiple threads to access the same resources concurrently. In the real world the above things actually just simplify usage and to a degree implementation. It's also worth mentioning that any function or method from any extension will run **exactly** the same inside a thread, which saves me a billion hours of testing and saves you from errors.\r\n\r\nIf you have read this far and are still thinking \"but how will I send asynchronous MySQL queries if I cannot pass resources for a thread to use?\", then frankly I am disappointed: the simplest solution is always the best ... I'll spell it out: you do not need to pass resources between threads because you can pass the parameters that create them and create the resources in the thread scope, in the case of MySQL you might even consider using persistent connections.\r\n\r\n### Features\r\nThreads on their own are of limited use in the real world. You need to be able to organize and synchronize your instructions in a multi-threaded application in any language. To that end Mutex's and Condition variables are available.\r\n\r\nMore features are planned but not yet ready:\r\n* Events\r\n* Thread Groups\r\n* Sharing Variables during Runtime\r\n\r\nIn time everything above will become ready, and I'll no doubt add to the list as I receive feedback from y'all."}